import{b as he}from"/build/_shared/chunk-UWPJM7AV.js";import{a as ge,b as be}from"/build/_shared/chunk-PZREKCLW.js";import{a as k,c as E,d as W,e as j,f as F}from"/build/_shared/chunk-CX5Y3VPS.js";import{c as fe,d as me,v as $e}from"/build/_shared/chunk-K6RWFLHP.js";import{b as ve,d as Ce}from"/build/_shared/chunk-7AP6T45O.js";import{a as ue,b as K}from"/build/_shared/chunk-3BPYJKF7.js";import{a as g,c as A,f as L}from"/build/_shared/chunk-6WZNKZUR.js";import{a as M}from"/build/_shared/chunk-X5H4KKWG.js";import{b as w,c as x,e as N,g as de,h as pe}from"/build/_shared/chunk-5WLYYZL3.js";import{h as Y}from"/build/_shared/chunk-LPZMHNQ2.js";import{a as S,b as R}from"/build/_shared/chunk-4HXKWYDW.js";import{c as T}from"/build/_shared/chunk-Q3IECNXJ.js";var V=T(S(),1);var Pe=T(S(),1);var u=T(S(),1);var q,Te="HoverCard",[xe,Rt]=A(Te,[E]),J=E(),[We,Q]=xe(Te),je=e=>{let{__scopeHoverCard:r,children:t,open:o,defaultOpen:n,onOpenChange:s,openDelay:i=700,closeDelay:m=300}=e,c=J(r),f=(0,u.useRef)(0),l=(0,u.useRef)(0),$=(0,u.useRef)(!1),v=(0,u.useRef)(!1),[C=!1,p]=L({prop:o,defaultProp:n,onChange:s}),h=(0,u.useCallback)(()=>{clearTimeout(l.current),f.current=window.setTimeout(()=>p(!0),i)},[i,p]),b=(0,u.useCallback)(()=>{clearTimeout(f.current),!$.current&&!v.current&&(l.current=window.setTimeout(()=>p(!1),m))},[m,p]),y=(0,u.useCallback)(()=>p(!1),[p]);return(0,u.useEffect)(()=>()=>{clearTimeout(f.current),clearTimeout(l.current)},[]),(0,u.createElement)(We,{scope:r,open:C,onOpenChange:p,onOpen:h,onClose:b,onDismiss:y,hasSelectionRef:$,isPointerDownOnContentRef:v},(0,u.createElement)(W,c,t))},Fe="HoverCardTrigger",Ue=(0,u.forwardRef)((e,r)=>{let{__scopeHoverCard:t,...o}=e,n=Q(Fe,t),s=J(t);return(0,u.createElement)(j,x({asChild:!0},s),(0,u.createElement)(M.a,x({"data-state":n.open?"open":"closed"},o,{ref:r,onPointerEnter:g(e.onPointerEnter,U(n.onOpen)),onPointerLeave:g(e.onPointerLeave,U(n.onClose)),onFocus:g(e.onFocus,n.onOpen),onBlur:g(e.onBlur,n.onClose),onTouchStart:g(e.onTouchStart,i=>i.preventDefault())})))}),Ge="HoverCardPortal",[St,Be]=xe(Ge,{forceMount:void 0});var X="HoverCardContent",ze=(0,u.forwardRef)((e,r)=>{let t=Be(X,e.__scopeHoverCard),{forceMount:o=t.forceMount,...n}=e,s=Q(X,e.__scopeHoverCard);return(0,u.createElement)(K,{present:o||s.open},(0,u.createElement)(Ve,x({"data-state":s.open?"open":"closed"},n,{onPointerEnter:g(e.onPointerEnter,U(s.onOpen)),onPointerLeave:g(e.onPointerLeave,U(s.onClose)),ref:r})))}),Ve=(0,u.forwardRef)((e,r)=>{let{__scopeHoverCard:t,onEscapeKeyDown:o,onPointerDownOutside:n,onFocusOutside:s,onInteractOutside:i,...m}=e,c=Q(X,t),f=J(t),l=(0,u.useRef)(null),$=N(r,l),[v,C]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{if(v){let p=document.body;return q=p.style.userSelect||p.style.webkitUserSelect,p.style.userSelect="none",p.style.webkitUserSelect="none",()=>{p.style.userSelect=q,p.style.webkitUserSelect=q}}},[v]),(0,u.useEffect)(()=>{if(l.current){let p=()=>{C(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var h;((h=document.getSelection())===null||h===void 0?void 0:h.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",p),()=>{document.removeEventListener("pointerup",p),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),(0,u.useEffect)(()=>{l.current&&Ye(l.current).forEach(h=>h.setAttribute("tabindex","-1"))}),(0,u.createElement)(k,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:o,onPointerDownOutside:n,onFocusOutside:g(s,p=>{p.preventDefault()}),onDismiss:c.onDismiss},(0,u.createElement)(F,x({},f,m,{onPointerDown:g(m.onPointerDown,p=>{p.currentTarget.contains(p.target)&&C(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:$,style:{...m.style,userSelect:v?"text":void 0,WebkitUserSelect:v?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})))});function U(e){return r=>r.pointerType==="touch"?void 0:e()}function Ye(e){let r=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;t.nextNode();)r.push(t.currentNode);return r}var we=je,ye=Ue;var Z=ze;var Re=T(R(),1),ee=we,te=ye,G=Pe.forwardRef(({className:e,align:r="center",sideOffset:t=4,...o},n)=>(0,Re.jsx)(Z,{ref:n,align:r,sideOffset:t,className:w("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o}));G.displayName=Z.displayName;var De=T(S(),1);var a=T(S(),1);var[B,Ft]=A("Tooltip",[E]),re=E(),Xe="TooltipProvider",Je=700,oe="tooltip.open",[Qe,ne]=B(Xe),Ze=e=>{let{__scopeTooltip:r,delayDuration:t=Je,skipDelayDuration:o=300,disableHoverableContent:n=!1,children:s}=e,[i,m]=(0,a.useState)(!0),c=(0,a.useRef)(!1),f=(0,a.useRef)(0);return(0,a.useEffect)(()=>{let l=f.current;return()=>window.clearTimeout(l)},[]),(0,a.createElement)(Qe,{scope:r,isOpenDelayed:i,delayDuration:t,onOpen:(0,a.useCallback)(()=>{window.clearTimeout(f.current),m(!1)},[]),onClose:(0,a.useCallback)(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>m(!0),o)},[o]),isPointerInTransitRef:c,onPointerInTransitChange:(0,a.useCallback)(l=>{c.current=l},[]),disableHoverableContent:n},s)},ae="Tooltip",[et,z]=B(ae),tt=e=>{let{__scopeTooltip:r,children:t,open:o,defaultOpen:n=!1,onOpenChange:s,disableHoverableContent:i,delayDuration:m}=e,c=ne(ae,e.__scopeTooltip),f=re(r),[l,$]=(0,a.useState)(null),v=ue(),C=(0,a.useRef)(0),p=i??c.disableHoverableContent,h=m??c.delayDuration,b=(0,a.useRef)(!1),[y=!1,P]=L({prop:o,defaultProp:n,onChange:le=>{le?(c.onOpen(),document.dispatchEvent(new CustomEvent(oe))):c.onClose(),s?.(le)}}),_=(0,a.useMemo)(()=>y?b.current?"delayed-open":"instant-open":"closed",[y]),H=(0,a.useCallback)(()=>{window.clearTimeout(C.current),b.current=!1,P(!0)},[P]),D=(0,a.useCallback)(()=>{window.clearTimeout(C.current),P(!1)},[P]),ie=(0,a.useCallback)(()=>{window.clearTimeout(C.current),C.current=window.setTimeout(()=>{b.current=!0,P(!0)},h)},[h,P]);return(0,a.useEffect)(()=>()=>window.clearTimeout(C.current),[]),(0,a.createElement)(W,f,(0,a.createElement)(et,{scope:r,contentId:v,open:y,stateAttribute:_,trigger:l,onTriggerChange:$,onTriggerEnter:(0,a.useCallback)(()=>{c.isOpenDelayed?ie():H()},[c.isOpenDelayed,ie,H]),onTriggerLeave:(0,a.useCallback)(()=>{p?D():window.clearTimeout(C.current)},[D,p]),onOpen:H,onClose:D,disableHoverableContent:p},t))},Se="TooltipTrigger",ot=(0,a.forwardRef)((e,r)=>{let{__scopeTooltip:t,...o}=e,n=z(Se,t),s=ne(Se,t),i=re(t),m=(0,a.useRef)(null),c=N(r,m,n.onTriggerChange),f=(0,a.useRef)(!1),l=(0,a.useRef)(!1),$=(0,a.useCallback)(()=>f.current=!1,[]);return(0,a.useEffect)(()=>()=>document.removeEventListener("pointerup",$),[$]),(0,a.createElement)(j,x({asChild:!0},i),(0,a.createElement)(M.button,x({"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute},o,{ref:c,onPointerMove:g(e.onPointerMove,v=>{v.pointerType!=="touch"&&!l.current&&!s.isPointerInTransitRef.current&&(n.onTriggerEnter(),l.current=!0)}),onPointerLeave:g(e.onPointerLeave,()=>{n.onTriggerLeave(),l.current=!1}),onPointerDown:g(e.onPointerDown,()=>{f.current=!0,document.addEventListener("pointerup",$,{once:!0})}),onFocus:g(e.onFocus,()=>{f.current||n.onOpen()}),onBlur:g(e.onBlur,n.onClose),onClick:g(e.onClick,n.onClose)})))}),rt="TooltipPortal",[Ut,nt]=B(rt,{forceMount:void 0});var I="TooltipContent",at=(0,a.forwardRef)((e,r)=>{let t=nt(I,e.__scopeTooltip),{forceMount:o=t.forceMount,side:n="top",...s}=e,i=z(I,e.__scopeTooltip);return(0,a.createElement)(K,{present:o||i.open},i.disableHoverableContent?(0,a.createElement)(Ee,x({side:n},s,{ref:r})):(0,a.createElement)(st,x({side:n},s,{ref:r})))}),st=(0,a.forwardRef)((e,r)=>{let t=z(I,e.__scopeTooltip),o=ne(I,e.__scopeTooltip),n=(0,a.useRef)(null),s=N(r,n),[i,m]=(0,a.useState)(null),{trigger:c,onClose:f}=t,l=n.current,{onPointerInTransitChange:$}=o,v=(0,a.useCallback)(()=>{m(null),$(!1)},[$]),C=(0,a.useCallback)((p,h)=>{let b=p.currentTarget,y={x:p.clientX,y:p.clientY},P=it(y,b.getBoundingClientRect()),_=lt(y,P),H=dt(h.getBoundingClientRect()),D=ut([..._,...H]);m(D),$(!0)},[$]);return(0,a.useEffect)(()=>()=>v(),[v]),(0,a.useEffect)(()=>{if(c&&l){let p=b=>C(b,l),h=b=>C(b,c);return c.addEventListener("pointerleave",p),l.addEventListener("pointerleave",h),()=>{c.removeEventListener("pointerleave",p),l.removeEventListener("pointerleave",h)}}},[c,l,C,v]),(0,a.useEffect)(()=>{if(i){let p=h=>{let b=h.target,y={x:h.clientX,y:h.clientY},P=c?.contains(b)||l?.contains(b),_=!pt(y,i);P?v():_&&(v(),f())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[c,l,i,f,v]),(0,a.createElement)(Ee,x({},e,{ref:s}))}),[ct,Gt]=B(ae,{isInside:!1}),Ee=(0,a.forwardRef)((e,r)=>{let{__scopeTooltip:t,children:o,"aria-label":n,onEscapeKeyDown:s,onPointerDownOutside:i,...m}=e,c=z(I,t),f=re(t),{onClose:l}=c;return(0,a.useEffect)(()=>(document.addEventListener(oe,l),()=>document.removeEventListener(oe,l)),[l]),(0,a.useEffect)(()=>{if(c.trigger){let $=v=>{let C=v.target;C!=null&&C.contains(c.trigger)&&l()};return window.addEventListener("scroll",$,{capture:!0}),()=>window.removeEventListener("scroll",$,{capture:!0})}},[c.trigger,l]),(0,a.createElement)(k,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:$=>$.preventDefault(),onDismiss:l},(0,a.createElement)(F,x({"data-state":c.stateAttribute},f,m,{ref:r,style:{...m.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),(0,a.createElement)(de,null,o),(0,a.createElement)(ct,{scope:t,isInside:!0},(0,a.createElement)(he,{id:c.contentId,role:"tooltip"},n||o))))});function it(e,r){let t=Math.abs(r.top-e.y),o=Math.abs(r.bottom-e.y),n=Math.abs(r.right-e.x),s=Math.abs(r.left-e.x);switch(Math.min(t,o,n,s)){case s:return"left";case n:return"right";case t:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function lt(e,r,t=5){let o=[];switch(r){case"top":o.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":o.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":o.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":o.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t});break}return o}function dt(e){let{top:r,right:t,bottom:o,left:n}=e;return[{x:n,y:r},{x:t,y:r},{x:t,y:o},{x:n,y:o}]}function pt(e,r){let{x:t,y:o}=e,n=!1;for(let s=0,i=r.length-1;s<r.length;i=s++){let m=r[s].x,c=r[s].y,f=r[i].x,l=r[i].y;c>o!=l>o&&t<(f-m)*(o-c)/(l-c)+m&&(n=!n)}return n}function ut(e){let r=e.slice();return r.sort((t,o)=>t.x<o.x?-1:t.x>o.x?1:t.y<o.y?-1:t.y>o.y?1:0),ft(r)}function ft(e){if(e.length<=1)return e.slice();let r=[];for(let o=0;o<e.length;o++){let n=e[o];for(;r.length>=2;){let s=r[r.length-1],i=r[r.length-2];if((s.x-i.x)*(n.y-i.y)>=(s.y-i.y)*(n.x-i.x))r.pop();else break}r.push(n)}r.pop();let t=[];for(let o=e.length-1;o>=0;o--){let n=e[o];for(;t.length>=2;){let s=t[t.length-1],i=t[t.length-2];if((s.x-i.x)*(n.y-i.y)>=(s.y-i.y)*(n.x-i.x))t.pop();else break}t.push(n)}return t.pop(),r.length===1&&t.length===1&&r[0].x===t[0].x&&r[0].y===t[0].y?r:r.concat(t)}var Oe=Ze,_e=tt,He=ot;var se=at;var Le=T(R(),1),Ne=Oe,Ie=_e,Ae=He,ce=De.forwardRef(({className:e,sideOffset:r=4,...t},o)=>(0,Le.jsx)(se,{ref:o,sideOffset:r,className:w("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));ce.displayName=se.displayName;var Me=T(S(),1);var O=T(R(),1),$t=pe("border-gray-300 animate-spin rounded-full border-4 border-t-primary",{variants:{loading:{1:"block",0:"hidden"},size:{default:"h-7 w-7",sm:"h-5 w-5",lg:"h-9 w-9"}},defaultVariants:{loading:1,size:"default"}}),ke=Me.default.forwardRef(({className:e,children:r,loading:t,size:o,...n},s)=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("span",{ref:s,className:w($t({loading:t,size:o}),e),...n}),t?null:r]}));var d=T(R(),1);function vt({username:e,ip:r="0.0.0.0",className:t=""}){if(e){let[o,n]=V.default.useState(null),s=V.default.useRef(null);return V.default.useEffect(()=>{if(s.current){let i=new IntersectionObserver(m=>{m.forEach(c=>{c.isIntersecting&&setTimeout(()=>fetch(`/api/user/${encodeURI(e)}`,{method:"GET"}).then(f=>f.json()).then(f=>{n(f),i.disconnect()}),100)})});return i.observe(s.current),()=>i.disconnect()}},[s.current]),(0,d.jsxs)(ee,{onOpenChange:()=>fetch(`/api/user/${encodeURI(e)}`,{method:"GET"}).then(i=>i.json()).then(i=>{n(i)}),children:[(0,d.jsx)(te,{asChild:!0,children:(0,d.jsxs)(Y,{to:encodeURI(`/wiki/\uC0AC\uC6A9\uC790:${e}`),className:w("text-blue-600 hover:text-blue-500",t),ref:s,children:[(0,d.jsx)("span",{className:w("inline-flex",o?.effect),children:e})," ",o?.badge?(0,d.jsx)("span",{dangerouslySetInnerHTML:{__html:o.badge},className:"color-emoji"}):null]})}),(0,d.jsx)(G,{className:"w-80",children:(0,d.jsx)("div",{className:"flex justify-between space-x-4",children:o?(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("h4",{className:"text-sm font-semibold",children:[(0,d.jsx)("span",{className:w("inline-flex",o?.effect),children:e})," ",o?.badge?(0,d.jsx)("span",{dangerouslySetInnerHTML:{__html:o.badge},className:"color-emoji"}):null," ",(0,d.jsx)(be,{isAdmin:o.isAdmin,isOwner:o.isOwner,only:!0})," ",(0,d.jsx)(Ne,{children:(0,d.jsxs)(Ie,{children:[(0,d.jsx)(Ae,{asChild:!0,children:(0,d.jsxs)(ge,{className:+new Date-o.lastDate<12e4?"bg-green-200 hover:bg-green-400 text-gray-600":"bg-red-200 hover:bg-red-400 text-red-600",children:[" ",+new Date-o.lastDate<12e4?"\uC628\uB77C\uC778":"\uC624\uD504\uB77C\uC778"]})}),(0,d.jsxs)(ce,{children:["\uC628\uB77C\uC778 ",(0,d.jsx)(Ce,{date:o.lastDate||0})]})]})})]}),(0,d.jsxs)("div",{className:"flex items-center pt-2",children:[(0,d.jsx)(me,{className:"mr-2 h-4 w-4 opacity-70"})," ",(0,d.jsxs)("span",{className:"text-xs text-muted-foreground",children:["\uAC00\uC785 \uB0A0\uC9DC: ",(0,d.jsx)(ve,{date:o.joinDate})]})]})]}):(0,d.jsx)(ke,{className:"flex m-auto"})})})]})}return r==="0.0.0.0"?(0,d.jsxs)(ee,{children:[(0,d.jsx)(te,{asChild:!0,children:(0,d.jsx)(Y,{to:"/wiki/\uC0AC\uC6A9\uC790:\uBD07",className:w("text-blue-600 hover:text-blue-500",t),children:(0,d.jsx)("b",{children:"\uBD07"})})}),(0,d.jsx)(G,{className:"w-80",children:(0,d.jsx)("div",{className:"flex justify-between space-x-4",children:(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("h4",{className:"text-sm font-semibold flex",children:["\uBD07 ",(0,d.jsx)(fe,{size:16,className:"ms-1 opacity-70"})]}),(0,d.jsxs)("div",{className:"flex items-center pt-2",children:[(0,d.jsx)($e,{className:"mr-2 h-4 w-4 opacity-70"})," ",(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:"\uC774 \uBD07\uC740 \uC774 \uC704\uD0A4\uC758 \uAE30\uB2A5\uC785\uB2C8\uB2E4."})]})]})})})]}):(0,d.jsx)("span",{className:t,children:r})}var so=vt;export{so as a};
