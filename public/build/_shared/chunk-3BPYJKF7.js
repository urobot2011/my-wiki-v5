import{d as m}from"/build/_shared/chunk-6WZNKZUR.js";import{e as E}from"/build/_shared/chunk-5WLYYZL3.js";import{a as S}from"/build/_shared/chunk-LPZMHNQ2.js";import{a as q}from"/build/_shared/chunk-4HXKWYDW.js";import{c as N}from"/build/_shared/chunk-Q3IECNXJ.js";var A=N(q(),1);var h=A["useId".toString()]||(()=>{}),M=0;function x(e){let[n,s]=A.useState(h());return m(()=>{e||s(r=>r??String(M++))},[e]),e||(n?`radix-${n}`:"")}var t=N(q(),1),O=N(S(),1);function T(e,n){return(0,t.useReducer)((s,r)=>{let a=n[s][r];return a??s},e)}var b=e=>{let{present:n,children:s}=e,r=y(n),a=typeof s=="function"?s({present:r.isPresent}):t.Children.only(s),u=E(r.ref,a.ref);return typeof s=="function"||r.isPresent?(0,t.cloneElement)(a,{ref:u}):null};b.displayName="Presence";function y(e){let[n,s]=(0,t.useState)(),r=(0,t.useRef)({}),a=(0,t.useRef)(e),u=(0,t.useRef)("none"),p=e?"mounted":"unmounted",[l,i]=T(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return(0,t.useEffect)(()=>{let o=$(r.current);u.current=l==="mounted"?o:"none"},[l]),m(()=>{let o=r.current,c=a.current;if(c!==e){let v=u.current,d=$(o);e?i("MOUNT"):d==="none"||o?.display==="none"?i("UNMOUNT"):i(c&&v!==d?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,i]),m(()=>{if(n){let o=f=>{let d=$(r.current).includes(f.animationName);f.target===n&&d&&(0,O.flushSync)(()=>i("ANIMATION_END"))},c=f=>{f.target===n&&(u.current=$(r.current))};return n.addEventListener("animationstart",c),n.addEventListener("animationcancel",o),n.addEventListener("animationend",o),()=>{n.removeEventListener("animationstart",c),n.removeEventListener("animationcancel",o),n.removeEventListener("animationend",o)}}else i("ANIMATION_END")},[n,i]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:(0,t.useCallback)(o=>{o&&(r.current=getComputedStyle(o)),s(o)},[])}}function $(e){return e?.animationName||"none"}export{x as a,b};
