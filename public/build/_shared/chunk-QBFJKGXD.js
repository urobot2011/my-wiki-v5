import{a as k}from"/build/_shared/chunk-3BPYJKF7.js";import{a as C,c as _,e as Y,f as K}from"/build/_shared/chunk-6WZNKZUR.js";import{a as D}from"/build/_shared/chunk-X5H4KKWG.js";import{c as w,e as x,f as P}from"/build/_shared/chunk-5WLYYZL3.js";import{a as O}from"/build/_shared/chunk-4HXKWYDW.js";import{c as M}from"/build/_shared/chunk-Q3IECNXJ.js";var b=M(O(),1);function B(e){let r=e+"CollectionProvider",[i,s]=_(r),[F,p]=i(r,{collectionRef:{current:null},itemMap:new Map}),R=u=>{let{scope:o,children:a}=u,l=b.default.useRef(null),n=b.default.useRef(new Map).current;return b.default.createElement(F,{scope:o,itemMap:n,collectionRef:l},a)},g=e+"CollectionSlot",$=b.default.forwardRef((u,o)=>{let{scope:a,children:l}=u,n=p(g,a),c=x(o,n.collectionRef);return b.default.createElement(P,{ref:c},l)}),f=e+"CollectionItemSlot",E="data-radix-collection-item",I=b.default.forwardRef((u,o)=>{let{scope:a,children:l,...n}=u,c=b.default.useRef(null),y=x(o,c),m=p(f,a);return b.default.useEffect(()=>(m.itemMap.set(c,{ref:c,...n}),()=>void m.itemMap.delete(c))),b.default.createElement(P,{[E]:"",ref:y},l)});function S(u){let o=p(e+"CollectionConsumer",u);return b.default.useCallback(()=>{let l=o.collectionRef.current;if(!l)return[];let n=Array.from(l.querySelectorAll(`[${E}]`));return Array.from(o.itemMap.values()).sort((m,A)=>n.indexOf(m.ref.current)-n.indexOf(A.ref.current))},[o.collectionRef,o.itemMap])}return[{Provider:R,Slot:$,ItemSlot:I},S,s]}var T=M(O(),1),X=(0,T.createContext)(void 0);function H(e){let r=(0,T.useContext)(X);return e||r||"ltr"}var t=M(O(),1);var N="rovingFocusGroup.onEntryFocus",Z={bubbles:!1,cancelable:!0},L="RovingFocusGroup",[G,V,ee]=B(L),[te,we]=_(L,[ee]),[oe,re]=te(L),ne=(0,t.forwardRef)((e,r)=>(0,t.createElement)(G.Provider,{scope:e.__scopeRovingFocusGroup},(0,t.createElement)(G.Slot,{scope:e.__scopeRovingFocusGroup},(0,t.createElement)(ce,w({},e,{ref:r}))))),ce=(0,t.forwardRef)((e,r)=>{let{__scopeRovingFocusGroup:i,orientation:s,loop:F=!1,dir:p,currentTabStopId:R,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:$,onEntryFocus:f,...E}=e,I=(0,t.useRef)(null),S=x(r,I),u=H(p),[o=null,a]=K({prop:R,defaultProp:g,onChange:$}),[l,n]=(0,t.useState)(!1),c=Y(f),y=V(i),m=(0,t.useRef)(!1),[A,U]=(0,t.useState)(0);return(0,t.useEffect)(()=>{let d=I.current;if(d)return d.addEventListener(N,c),()=>d.removeEventListener(N,c)},[c]),(0,t.createElement)(oe,{scope:i,orientation:s,dir:u,loop:F,currentTabStopId:o,onItemFocus:(0,t.useCallback)(d=>a(d),[a]),onItemShiftTab:(0,t.useCallback)(()=>n(!0),[]),onFocusableItemAdd:(0,t.useCallback)(()=>U(d=>d+1),[]),onFocusableItemRemove:(0,t.useCallback)(()=>U(d=>d-1),[])},(0,t.createElement)(D.div,w({tabIndex:l||A===0?-1:0,"data-orientation":s},E,{ref:S,style:{outline:"none",...e.style},onMouseDown:C(e.onMouseDown,()=>{m.current=!0}),onFocus:C(e.onFocus,d=>{let z=!m.current;if(d.target===d.currentTarget&&z&&!l){let j=new CustomEvent(N,Z);if(d.currentTarget.dispatchEvent(j),!j.defaultPrevented){let h=y().filter(v=>v.focusable),J=h.find(v=>v.active),Q=h.find(v=>v.id===o),W=[J,Q,...h].filter(Boolean).map(v=>v.ref.current);q(W)}}m.current=!1}),onBlur:C(e.onBlur,()=>n(!1))})))}),se="RovingFocusGroupItem",ae=(0,t.forwardRef)((e,r)=>{let{__scopeRovingFocusGroup:i,focusable:s=!0,active:F=!1,tabStopId:p,...R}=e,g=k(),$=p||g,f=re(se,i),E=f.currentTabStopId===$,I=V(i),{onFocusableItemAdd:S,onFocusableItemRemove:u}=f;return(0,t.useEffect)(()=>{if(s)return S(),()=>u()},[s,S,u]),(0,t.createElement)(G.ItemSlot,{scope:i,id:$,focusable:s,active:F},(0,t.createElement)(D.span,w({tabIndex:E?0:-1,"data-orientation":f.orientation},R,{ref:r,onMouseDown:C(e.onMouseDown,o=>{s?f.onItemFocus($):o.preventDefault()}),onFocus:C(e.onFocus,()=>f.onItemFocus($)),onKeyDown:C(e.onKeyDown,o=>{if(o.key==="Tab"&&o.shiftKey){f.onItemShiftTab();return}if(o.target!==o.currentTarget)return;let a=de(o,f.orientation,f.dir);if(a!==void 0){o.preventDefault();let n=I().filter(c=>c.focusable).map(c=>c.ref.current);if(a==="last")n.reverse();else if(a==="prev"||a==="next"){a==="prev"&&n.reverse();let c=n.indexOf(o.currentTarget);n=f.loop?ue(n,c+1):n.slice(c+1)}setTimeout(()=>q(n))}})})))}),ie={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fe(e,r){return r!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function de(e,r,i){let s=fe(e.key,i);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return ie[s]}function q(e){let r=document.activeElement;for(let i of e)if(i===r||(i.focus(),document.activeElement!==r))return}function ue(e,r){return e.map((i,s)=>e[(r+s)%e.length])}var _e=ne,Ae=ae;export{B as a,H as b,we as c,_e as d,Ae as e};
